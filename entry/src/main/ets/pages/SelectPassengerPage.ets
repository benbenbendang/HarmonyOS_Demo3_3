import router from '@ohos.router';
import promptAction from '@ohos.promptAction';

interface GeneratedTypeLiteralInterface_1 {
  callback?: (list: string[]) => void;
}

@Entry
@Component
struct SelectPassengerPage {
  @State passengerList: string[] = ['å¼ ä¸‰', 'æå››', 'ç‹äº”']
  @State selected: Set<string> = new Set()
  @State newPassenger: string = ''

  private callback: ((list: string[]) => void) | undefined

  aboutToAppear() {
    const p = router.getParams() as GeneratedTypeLiteralInterface_1
    this.callback = p?.callback
  }

  build() {
    Column() {
      // é¡¶éƒ¨æ 
      Row() {
        Text("â¬… è¿”å›")
          .fontSize(16)
          .fontColor(Color.White)
          .margin({ left: 12 })
          .onClick(() => router.back())
        Blank().layoutWeight(1)
        Text("ğŸŒŸ é€‰æ‹©ä¹˜è½¦äºº")
          .fontSize(20).fontWeight(FontWeight.Bold).fontColor(Color.White)
        Blank().layoutWeight(1)
      }
      .width('100%').height(60)
      .alignItems(VerticalAlign.Center)
      .backgroundColor('#F472B6') // ç²‰è‰²èƒŒæ™¯

      // æ·»åŠ æ–°ä¹˜è½¦äºº
      Row({ space: 10 }) {
        TextInput({ placeholder: "è¾“å…¥ä¹˜è½¦äººå§“å âœï¸" })
          .width(220).height(38)
          .borderRadius(10)
          .backgroundColor('#FFF')
          .padding({ left: 10 })
          .onChange((val: string) => this.newPassenger = val)

        Button("æ·»åŠ ")
          .width(70).height(38)
          .backgroundColor('#10B981')
          .fontColor(Color.White)
          .borderRadius(10)
          .onClick(() => {
            if (this.newPassenger.trim().length > 0) {
              this.passengerList.push(this.newPassenger.trim())
              this.newPassenger = ''
              promptAction.showToast({ message: "ğŸŒ¸ æ·»åŠ æˆåŠŸ" })
            }
          })
      }
      .margin({ top: 20, left: 20, right: 20 })

      // ä¹˜è½¦äººåˆ—è¡¨
      Column({ space: 12 }) {
        ForEach(this.passengerList, (p: string) => {
          Row() {
            Checkbox({ name: p, group: "passenger" })
              .select(this.selected.has(p))
              .onChange((isCheck: boolean) => {
                if (isCheck) this.selected.add(p)
                else this.selected.delete(p)
              })
            Text("ğŸ‘¤ " + p).fontSize(16).margin({ left: 10 }).fontColor('#111827')
          }
          .padding(14)
          .width('90%')
          .backgroundColor('#E0F2FE') // æµ…è“åº•
          .borderRadius(14)
          .shadow({ radius: 6, color: '#22000000', offsetX: 0, offsetY: 3 })
        })
      }
      .margin({ top: 20 })
      .alignItems(HorizontalAlign.Center)

      Blank().layoutWeight(1)

      // åº•éƒ¨ç¡®è®¤æŒ‰é’®
      Button("âœ¨ ç¡®è®¤é€‰æ‹©")
        .width('90%').height(48)
        .backgroundColor('#7C3AED') // ç´«è‰²
        .fontColor(Color.White)
        .fontWeight(FontWeight.Bold)
        .borderRadius(24)
        .margin({ bottom: 20 })
        .onClick(() => {
          if (this.callback) this.callback(Array.from(this.selected))
          router.back()
        })
    }
    .width('100%').height('100%')
    .linearGradient({
      angle: 180,
      colors: [
        [0xFFFDF2F8, 0.0], // æ¸å˜èµ·ç‚¹
        [0xFFE0F2FE, 1.0]  // æ¸å˜ç»ˆç‚¹
      ]
    })


  }
}
